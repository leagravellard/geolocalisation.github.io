<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Agdasima&family=Orbitron:wght@500&family=Roboto+Mono&family=Shadows+Into+Light&display=swap" rel="stylesheet">
    <title>Géolocalisation</title>
    <script>
        // Fonction pour récupérer la position géographique
        function getLocation() {
          if (navigator.geolocation) {
            // Demande l'autorisation de l'utilisateur pour accéder à sa position
            navigator.geolocation.getCurrentPosition(showPosition, showError);
          } else {
            console.log("La géolocalisation n'est pas prise en charge par votre navigateur.");
          }
        }

        // Fonction de rappel en cas de succès de la récupération de la position
        function showPosition(position) {
          var latitude = position.coords.latitude;
          var longitude = position.coords.longitude;
          
          console.log("Latitude : " + latitude);
          console.log("Longitude : " + longitude);

          // Rediriger vers la page du code QR avec les coordonnées en paramètres d'URL
          window.location.href = `sous_docs/index.html?lat=${latitude}&lon=${longitude}`;
        }

        // Fonction de rappel en cas d'erreur lors de la récupération de la position
        function showError(error) {
          switch(error.code) {
            case error.PERMISSION_DENIED:
              console.log("L'utilisateur a refusé la demande de géolocalisation.");
              break;
            case error.POSITION_UNAVAILABLE:
              console.log("Les informations de position ne sont pas disponibles.");
              break;
            case error.TIMEOUT:
              console.log("La demande de géolocalisation a expiré.");
              break;
            case error.UNKNOWN_ERROR:
              console.log("Une erreur inconnue s'est produite lors de la géolocalisation.");
              break;
          }
        }
    </script>
</head>
<body>
  <div class="round-box">
    <h1>Géolocalisation</h1>
    <button onclick="getLocation()">Obtenir la position</button>
  </div>
</body>
</html>
